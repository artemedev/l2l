<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:materialIcons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="l2l_aggregator.Views.Popup.ConfirmationDialog"
             Name="ConfirmationDialogControl">

	<!-- Затемняющий фон -->
	<Border Background="#80000000"
            IsVisible="{Binding IsVisible, ElementName=ConfirmationDialogControl}">

		<!-- Центрирование модального окна -->
		<Grid ColumnDefinitions="*,*,*,*">
			<Grid.RowDefinitions>
				<RowDefinition Height="*"/>
				<RowDefinition Height="*"/>
				<RowDefinition Height="*"/>
			</Grid.RowDefinitions>

			<!-- Само модальное окно -->
			<Border Grid.Row="1"
					Grid.Column="1"
					Grid.ColumnSpan="2"
					Background="White"
                    BorderBrush="Gray"
                    BorderThickness="2"
                    CornerRadius="8"
                    Padding="20"
                    BoxShadow="0 8 32 0 #4C000000"
					HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch">

				<Grid RowDefinitions="*,3*,*">

					<!-- Заголовок с иконкой -->
					<Grid Grid.Row="0"
                          ColumnDefinitions="*,10*,*"
                          Margin="0,0,0,5">
						<Viewbox Grid.Column="0"
								 Margin="0,0,15,0"
								 VerticalAlignment="Center"
								 HorizontalAlignment="Center">
							<!-- Иконка -->
							<materialIcons:MaterialIcon Kind="{Binding IconKind, ElementName=ConfirmationDialogControl}"
														Foreground="{Binding IconColor, ElementName=ConfirmationDialogControl}"/>
						</Viewbox>
						<!-- Заголовок -->
						<TextBlock Grid.Column="1"
                                   Text="{Binding Title, ElementName=ConfirmationDialogControl}"
								   FontSize="{Binding Bounds.Width, 
												RelativeSource={RelativeSource AncestorType=UserControl}, 
												Converter={StaticResource ResponsiveFontSizeConverter}, 
												ConverterParameter='0.017;16;48'}"
                                   FontWeight="Bold"
                                   VerticalAlignment="Center"/>

						<Viewbox Grid.Column="2"
								 VerticalAlignment="Center"
								 HorizontalAlignment="Center">
							<!-- Кнопка закрытия -->
							<Button
									Name="CloseButton"
									Content="✕"
									Padding="0"
									Background="Transparent"
									BorderThickness="0"
									FontSize="{Binding Bounds.Width, 
											RelativeSource={RelativeSource AncestorType=UserControl}, 
											Converter={StaticResource ResponsiveFontSizeConverter}, 
											ConverterParameter='0.017;36;64'}"
									FontWeight="Bold"
									Foreground="Gray"
									VerticalAlignment="Stretch"
									HorizontalAlignment="Stretch"
									VerticalContentAlignment="Center"
									HorizontalContentAlignment="Center"
									ToolTip.Tip="Закрыть"
									Click="CloseButton_Click">
								<Button.Styles>
									<Style Selector="Button:pointerover">
										<Setter Property="Foreground" Value="Red"/>
										<Setter Property="Background" Value="#20FF0000"/>
									</Style>
								</Button.Styles>
							</Button>
						</Viewbox>
					</Grid>

					<!-- Содержимое -->
					<TextBlock Grid.Row="1"
                               Text="{Binding Message, ElementName=ConfirmationDialogControl}"
							   FontSize="{Binding Bounds.Width, 
											RelativeSource={RelativeSource AncestorType=UserControl}, 
											Converter={StaticResource ResponsiveFontSizeConverter}, 
											ConverterParameter='0.017;16;48'}"
                               TextWrapping="Wrap"
                               Margin="15,0,0,25"
                               LineHeight="{Binding Bounds.Width, 
											RelativeSource={RelativeSource AncestorType=UserControl}, 
											Converter={StaticResource ResponsiveFontSizeConverter}, 
											ConverterParameter='0.017;16;48'}"/>

					<!-- Кнопки действий -->
					<Grid Grid.Row="2" ColumnDefinitions="*,*,*">

						<Button Name="CancelButton"
								Grid.Column="0"
								HorizontalAlignment="Stretch"
								VerticalAlignment="Stretch"
								HorizontalContentAlignment="Center"
								VerticalContentAlignment="Center"
                                Content="{Binding CancelText, ElementName=ConfirmationDialogControl}"
                                Background="LightGray"
								FontSize="{Binding Bounds.Width, 
											RelativeSource={RelativeSource AncestorType=UserControl}, 
											Converter={StaticResource ResponsiveFontSizeConverter}, 
											ConverterParameter='0.017;16;48'}"
                                Click="CancelButton_Click">
							<Button.Styles>
								<Style Selector="Button:pointerover">
									<Setter Property="Background" Value="Gray"/>
									<Setter Property="Foreground" Value="White"/>
								</Style>
							</Button.Styles>
						</Button>

						<Button Name="ConfirmButton"
								Grid.Column="2"
								HorizontalAlignment="Stretch"
								VerticalAlignment="Stretch"
								HorizontalContentAlignment="Center"
								VerticalContentAlignment="Center"
                                Content="{Binding ConfirmText, ElementName=ConfirmationDialogControl}"
                                Background="{Binding ConfirmButtonColor, ElementName=ConfirmationDialogControl}"
                                Foreground="White"
                                BorderThickness="0"
								FontSize="{Binding Bounds.Width, 
											RelativeSource={RelativeSource AncestorType=UserControl}, 
											Converter={StaticResource ResponsiveFontSizeConverter}, 
											ConverterParameter='0.017;16;48'}"
                                FontWeight="Bold"
                                Click="ConfirmButton_Click">
							<Button.Styles>
								<Style Selector="Button:pointerover">
									<Setter Property="Opacity" Value="0.8"/>
								</Style>
							</Button.Styles>
						</Button>
					</Grid>
				</Grid>
			</Border>
		</Grid>
	</Border>
</UserControl>